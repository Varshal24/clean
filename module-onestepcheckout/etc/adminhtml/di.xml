<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <virtualType name="Aheadworks\OneStepCheckout\Block\Adminhtml\System\Config\Address\Customization\BillingAddress"
                 type="Aheadworks\OneStepCheckout\Block\Adminhtml\System\Config\Address\Customization">
        <arguments>
            <argument name="addressType" xsi:type="string">billing</argument>
            <argument name="attributeMetadata" xsi:type="object">Aheadworks\OneStepCheckout\Model\Address\Form\AttributeMeta\Provider</argument>
        </arguments>
    </virtualType>
    <virtualType name="Aheadworks\OneStepCheckout\Block\Adminhtml\System\Config\Address\Customization\ShippingAddress"
                 type="Aheadworks\OneStepCheckout\Block\Adminhtml\System\Config\Address\Customization">
        <arguments>
            <argument name="addressType" xsi:type="string">shipping</argument>
            <argument name="attributeMetadata" xsi:type="object">Aheadworks\OneStepCheckout\Model\Address\Form\AttributeMeta\Provider</argument>
        </arguments>
    </virtualType>
    <virtualType name="Aheadworks\OneStepCheckout\Block\Adminhtml\Report\CheckoutBehavior\AddressAttributes\MetaProvider\BillingAddress"
                 type="Aheadworks\OneStepCheckout\Block\Adminhtml\Report\CheckoutBehavior\AddressAttributes\MetaProvider">
        <arguments>
            <argument name="addressType" xsi:type="string">billing</argument>
        </arguments>
    </virtualType>
    <virtualType name="Aheadworks\OneStepCheckout\Block\Adminhtml\Report\CheckoutBehavior\AddressAttributes\MetaProvider\ShippingAddress"
                 type="Aheadworks\OneStepCheckout\Block\Adminhtml\Report\CheckoutBehavior\AddressAttributes\MetaProvider">
        <arguments>
            <argument name="addressType" xsi:type="string">shipping</argument>
        </arguments>
    </virtualType>
    <virtualType name="Aheadworks\OneStepCheckout\Model\Customer\Form\AttributeMeta\Provider"
                 type="Aheadworks\OneStepCheckout\Model\Attribute\Form\AttributeMeta\Provider">
        <arguments>
            <argument name="metadata" xsi:type="object">Magento\Customer\Api\CustomerMetadataInterface</argument>
        </arguments>
    </virtualType>
    <virtualType name="Aheadworks\OneStepCheckout\Model\Address\Form\AttributeMeta\Provider"
                 type="Aheadworks\OneStepCheckout\Model\Attribute\Form\AttributeMeta\Provider">
        <arguments>
            <argument name="metadata" xsi:type="object">Magento\Customer\Api\AddressMetadataInterface</argument>
        </arguments>
    </virtualType>
    <type name="Aheadworks\OneStepCheckout\Block\Adminhtml\System\Config\CustomerInfo\Customization">
        <arguments>
            <argument name="attributeMetadata" xsi:type="object">Aheadworks\OneStepCheckout\Model\Customer\Form\AttributeMeta\Provider</argument>
        </arguments>
    </type>

    <!-- Plugins -->
    <type name="Magento\Ui\Model\Export\MetadataProvider">
        <plugin name="aw-osc-export-metadata-provider" type="Aheadworks\OneStepCheckout\Plugin\Export\Model\MetadataProvider"/>
    </type>
    <type name="Magento\Email\Model\Template">
        <plugin name="aw-osc-order-email-variable-plugin" type="Aheadworks\OneStepCheckout\Plugin\Email\Model\TemplatePlugin"/>
    </type>
    <type name="Magento\Sales\Block\Adminhtml\Order\View\Tab\History">
        <plugin name="aw-osc-block_admin_order_history_plugin" type="Aheadworks\OneStepCheckout\Plugin\Block\Adminhtml\Order\Tab\OrderNoteBeforeHistoryPlugin"/>
    </type>
</config>
